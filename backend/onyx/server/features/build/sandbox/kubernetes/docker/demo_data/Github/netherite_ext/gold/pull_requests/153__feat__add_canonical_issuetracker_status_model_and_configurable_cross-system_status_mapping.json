{
  "id": "https://github.com/onyx-dot-app/onyx#153",
  "semantic_identifier": "153: feat: Add canonical IssueTracker status model and configurable cross-system status mapping",
  "title": null,
  "source": "github",
  "doc_updated_at": "2025-11-16",
  "metadata": {
    "object_type": "PullRequest",
    "id": "153",
    "merged": "False",
    "state": "open",
    "user": {
      "login": "sofia_ramirez",
      "name": "sofia_ramirez",
      "email": "sofia_ramirez@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "jason_morris",
        "name": "jason_morris",
        "email": "jason_morris@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "2",
    "num_files_changed": "11",
    "labels": [],
    "created_at": "2025-11-16",
    "updated_at": "2025-11-16",
    "closed_at": ""
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\n### Summary\nImplements a canonical IssueTracker status model (with allowed transitions) and a single-source-of-truth mapping table that links external systems (Zendesk/Intercom, Jira/Linear, CRM) statuses to the canonical statuses. Includes handling for unknown/missing and deprecated external statuses and exposes mappings as seeded defaults that can be edited.\n\n### Implementation details\n- **Canonical status model**\n  - Introduces a `issue_tracker_statuses` catalog defining:\n    - `key` (stable identifier), `label`, `category` (e.g., support/engineering/sales), `is_terminal` flags\n    - allowed transitions via `issue_tracker_status_transitions` (from_status -> to_status)\n  - Adds a small domain layer/enum wrapper so application code can resolve statuses by `key` without hard-coding external values.\n\n- **Cross-system mapping table**\n  - Adds `issue_tracker_status_mappings` keyed by:\n    - `source_system` (zendesk/intercom/jira/linear/crm)\n    - `external_status` (string, as received)\n    - `canonical_status_id` (FK)\n    - `state` (active/deprecated)\n    - optional `notes`/`replacement_external_status`\n  - Enforces uniqueness on `(source_system, external_status)` and validates that mapped canonical statuses exist.\n\n- **Unknown/missing/deprecated handling**\n  - Adds a reserved canonical status (e.g., `unknown`) and default behavior:\n    - if no mapping exists, resolve to `unknown` and emit a structured warning log\n    - if mapping is deprecated, continue resolving but log with higher severity and include replacement metadata if provided\n\n- **Configuration + seeded defaults**\n  - Adds migrations + seed script to populate:\n    - canonical statuses\n    - allowed transitions\n    - baseline mappings for common known statuses per system\n  - Provides an admin/config surface (or config API) to list/create/update mappings without redeploying.\n\n### What to know\n- Downstream sync logic should resolve external statuses through the mapping service/table and rely only on canonical `key`s.\n- New external statuses can be supported by adding a mapping entry; unmapped statuses won\u2019t break ingestion but will resolve to `unknown` with logs for follow-up.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#153"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}