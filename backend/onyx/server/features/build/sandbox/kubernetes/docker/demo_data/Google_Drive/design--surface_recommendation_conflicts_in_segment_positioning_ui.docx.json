{
  "id": "4f316cd951214700ba425460f5760949",
  "semantic_identifier": "Design--Surface recommendation conflicts in Segment Positioning UI.docx",
  "title": null,
  "source": "google_doc",
  "doc_updated_at": "2025-09-09",
  "metadata": {
    "owner_names": ""
  },
  "doc_metadata": {
    "hierarchy": {
      "source_path": [
        "My Drive"
      ],
      "drive_id": null,
      "file_name": "Design--Surface recommendation conflicts in Segment Positioning UI.docx",
      "mime_type": "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
    }
  },
  "sections": [
    {
      "text": "### Overview / Goal  \nWe will enhance the Segment Positioning view to surface \u201crecommendation conflicts\u201d using conflict metadata returned by the API. When a recommendation (grouped by category) is incompatible with other segments, the UI should clearly flag it in-place and provide a lightweight way to inspect details. This improves trust and usability by making conflicts discoverable without changing the core recommendation layout or flow.\n\n### Data contract / Compatibility  \nThe view will read an optional `conflicts` (or equivalent) field on each recommendation category (or recommendation item, depending on the API shape). This metadata may be missing entirely for older workspaces or when the feature is disabled. The UI must treat absent/empty conflict data as \u201cno conflicts\u201d and continue rendering recommendations exactly as today; parsing should be defensive (null-safe, default empty arrays) so existing recommendation rendering cannot be blocked by malformed or partial metadata.\n\n### UX / Interaction  \nFor each recommendation category, we will add a compact conflict indicator (e.g., small \u201cConflict\u201d chip or icon with count) shown only when conflicts exist. Clicking (or pressing Enter/Space) opens a drill-in panel (side sheet or popover consistent with existing patterns) listing: (1) the conflicting segments, and (2) the specific conflicting statements (verbatim from metadata). The panel will be scoped to the selected category and support multiple conflicts, with clear labeling and truncation/scroll for long lists; it should be dismissible via close button and Escape.\n\n### Implementation notes / Quality  \nImplementation will be isolated to the Segment Positioning view components: a small `ConflictIndicator` subcomponent plus a `ConflictPanel` that consumes the metadata and renders the list. We\u2019ll add unit tests to verify: indicator presence/absence based on metadata, panel content rendering, and resilience to missing/empty/unknown conflict payloads. We\u2019ll also add a simple analytics event for panel opens (optional) and ensure accessibility (ARIA labels, focus management on open/close) and no layout shift for non-conflict cases.",
      "link": "https://www.onyx.app/46043"
    }
  ],
  "primary_owners": [
    "jason_morris"
  ],
  "secondary_owners": []
}