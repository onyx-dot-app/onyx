{
  "id": "https://github.com/onyx-dot-app/onyx#50",
  "semantic_identifier": "50: feat: Add configurable calibration outcomes with label-rule validation and explicit errors",
  "title": null,
  "source": "github",
  "doc_updated_at": "2025-09-13",
  "metadata": {
    "object_type": "PullRequest",
    "id": "50",
    "merged": "True",
    "state": "closed",
    "user": {
      "login": "kenji_watanabe",
      "name": "kenji_watanabe",
      "email": "kenji_watanabe@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "jason_morris",
        "name": "jason_morris",
        "email": "jason_morris@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "4",
    "num_files_changed": "40",
    "labels": [],
    "created_at": "2025-09-13",
    "updated_at": "2025-09-13",
    "closed_at": "2025-09-27"
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\nThis PR adds a backend configuration layer for fit-model calibration that allows users to choose the calibration outcome (activation, retention, or expansion) and define outcome-specific label rules (event/field mapping + time window). It also introduces validation to ensure required data sources/signals exist and that labels can be generated for the selected outcome.\n\nKey changes:\n- Outcome configuration\n  - Adds a persisted calibration config model/schema that includes:\n    - outcome type: activation | retention | expansion\n    - label rule definition: event name and/or field mapping, plus time window parameters\n  - Updates calibration job/service to read this config and generate labels using the selected outcome rules instead of implicit defaults.\n\n- Validation + error handling\n  - Adds preflight validation in the calibration pipeline to check:\n    - required events/fields for the configured outcome exist in the connected data sources\n    - the configured time window is valid (e.g., non-negative, required bounds provided)\n    - label generation would produce a valid label set (fail fast if impossible)\n  - Replaces silent fallback behavior with explicit, user-facing errors that specify which fields/events are missing and which outcome/rule failed.\n\n- API / integration points\n  - Extends the calibration configuration API endpoints to accept and return the outcome + label rule configuration.\n  - Ensures calibration runs are rejected early with a clear error payload when validation fails.\n\nUser impact:\n- Calibration can now be configured to target activation, retention, or expansion with custom label rules.\n- If required signals are missing, calibration will fail with actionable errors rather than silently using defaults.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#50"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}