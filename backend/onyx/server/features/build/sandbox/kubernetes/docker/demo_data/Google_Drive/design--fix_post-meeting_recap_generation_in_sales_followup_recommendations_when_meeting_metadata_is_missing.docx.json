{
  "id": "484d14b5ecb84863b9dd6ea02b8ff087",
  "semantic_identifier": "Design--Fix post-meeting recap generation in sales_followup_recommendations when meeting metadata is missing.docx",
  "title": null,
  "source": "google_doc",
  "doc_updated_at": "2025-05-13",
  "metadata": {
    "owner_names": ""
  },
  "doc_metadata": {
    "hierarchy": {
      "source_path": [
        "My Drive"
      ],
      "drive_id": null,
      "file_name": "Design--Fix post-meeting recap generation in sales_followup_recommendations when meeting metadata is missing.docx",
      "mime_type": "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
    }
  },
  "sections": [
    {
      "text": "### Problem / Goal\n`sales_followup_recommendations` currently fails to generate post-meeting recaps when the associated CRM meeting metadata is missing or contains empty fields (e.g., attendees, notes/transcript link, outcome). This causes recommendations to be silently omitted, reducing trust and leaving reps without next-step guidance. The goal is to make recap + next-step recommendations resilient: render with best-available data when possible, and when truly impossible, surface an explicit \u201crecap unavailable\u201d state with actionable logging for debugging.\n\n### Proposed Solution\nIntroduce defensive handling in the recap generation pipeline by normalizing meeting metadata into a canonical `MeetingContext` with explicit optional/required fields and derived fallbacks. For optional fields: if `attendees` is empty, fall back to known opportunity contacts/participants; if `notes/transcript link` is missing, fall back to any stored meeting summary text or related activity notes; if `outcome` is missing, infer from meeting status (completed/canceled) and/or default to \u201cOutcome not recorded.\u201d Templates should be updated to tolerate missing values by conditionally rendering sections (e.g., \u201cAttendees: unavailable\u201d) while still producing a recap skeleton and next-step suggestions based on opportunity + account context.\n\n### Failure Modes, Logging, and Contracts\nDefine a small set of truly required inputs for recap generation (e.g., opportunity ID, meeting timestamp or identifier, and at least one textual source such as transcript/notes/summary OR enough context to generate a generic recap). When these requirements are not met, the generator returns a typed failure result (not an empty list) containing a machine-readable reason code (e.g., `MISSING_MEETING_RECORD`, `NO_TEXT_SOURCE`, `INVALID_METADATA`). Emit structured logs/metrics with opportunity ID, meeting ID, missing fields, and reason code; avoid logging raw transcript/notes content. This makes failures observable and debuggable without compromising data privacy.\n\n### UI / UX and Acceptance Criteria\nUpdate the UI to display a clear \u201cRecap unavailable\u201d card/state when the backend returns a typed failure, including a brief explanation (e.g., \u201cMeeting details were not found in the CRM\u201d) and optional remediation (e.g., \u201cAdd notes or link a transcript to generate a recap\u201d). Acceptance criteria: (1) recommendations render when any subset of optional meeting fields are missing, using fallbacks; (2) when recap cannot be generated, UI shows the explicit unavailable state (no silent omission); (3) structured error logs are emitted with reason codes for all failures; (4) add unit/integration coverage for missing meeting record, empty attendees, missing transcript link, missing outcome, and completely missing textual sources.",
      "link": "https://www.onyx.app/30929"
    }
  ],
  "primary_owners": [
    "jiwon_kang"
  ],
  "secondary_owners": []
}