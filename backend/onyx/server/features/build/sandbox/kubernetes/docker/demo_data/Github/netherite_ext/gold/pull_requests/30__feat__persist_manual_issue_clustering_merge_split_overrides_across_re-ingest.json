{
  "id": "https://github.com/onyx-dot-app/onyx#30",
  "semantic_identifier": "30: feat: Persist manual issue clustering merge/split overrides across re-ingest",
  "title": null,
  "source": "github",
  "doc_updated_at": "2025-05-22",
  "metadata": {
    "object_type": "PullRequest",
    "id": "30",
    "merged": "True",
    "state": "closed",
    "user": {
      "login": "michael_anderson",
      "name": "michael_anderson",
      "email": "michael_anderson@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "kevin_sullivan",
        "name": "kevin_sullivan",
        "email": "kevin_sullivan@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "3",
    "num_files_changed": "54",
    "labels": [],
    "created_at": "2025-05-22",
    "updated_at": "2025-05-22",
    "closed_at": "2025-05-31"
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\nThis PR adds a durable \u201ccuration override\u201d layer to ensure manual cluster merge/split decisions survive re-ingestion of the same source conversations.\n\nImplementation (high level):\n- Introduces persistent storage for curation actions:\n  - Merge groups: a stable mapping of multiple cluster IDs to a single curated cluster ID.\n  - Split rules: deterministic rules to partition a cluster into multiple curated clusters (tracked with stable curated IDs).\n- Updates the issue_clustering pipeline to apply overrides after automated clustering and before any downstream derivations (summaries, tags, theme metadata) are generated.\n- Ensures curated cluster IDs are stable across runs by deriving/recording canonical curated IDs and applying them consistently when the same conversations are re-ingested.\n- Persists curation metadata (e.g., applied merge group/split rule identifiers) on the resulting clusters for auditability.\n\nTests:\n- Adds a regression test that:\n  1) Ingests a fixed set of conversations,\n  2) Performs manual merge and split operations,\n  3) Replays ingestion of the same conversations,\n  4) Asserts that curated cluster IDs, membership, and curation metadata remain unchanged.\n\nUser impact:\n- No API/UX changes required to benefit; existing manual merge/split operations will now remain effective after re-ingest instead of reverting to the automated clustering output.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#30"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}