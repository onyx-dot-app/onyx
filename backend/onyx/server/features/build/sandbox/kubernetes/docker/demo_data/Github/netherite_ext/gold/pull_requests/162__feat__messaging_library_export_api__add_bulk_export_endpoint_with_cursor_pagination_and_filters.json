{
  "id": "https://github.com/onyx-dot-app/onyx#162",
  "semantic_identifier": "162: feat: Messaging Library Export API: add bulk export endpoint with cursor pagination + filters",
  "title": null,
  "source": "github",
  "doc_updated_at": "2026-01-19",
  "metadata": {
    "object_type": "PullRequest",
    "id": "162",
    "merged": "False",
    "state": "open",
    "user": {
      "login": "kenji_watanabe",
      "name": "kenji_watanabe",
      "email": "kenji_watanabe@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "kevin_sullivan",
        "name": "kevin_sullivan",
        "email": "kevin_sullivan@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "10",
    "num_files_changed": "46",
    "labels": [],
    "created_at": "2026-01-19",
    "updated_at": "2026-01-19",
    "closed_at": ""
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\nImplements the core bulk export API for approved Messaging Library assets scoped to a workspace, optimized for incremental client sync.\n\nKey changes:\n- Adds a workspace-scoped bulk export endpoint that returns only approved assets.\n- Supports cursor-based pagination with `limit` + `cursor`, returning `next_cursor` when additional results are available.\n- Adds optional filters:\n  - `asset_type`\n  - `segment` / `icp`\n  - `updated_since` (for incremental sync)\n- Enforces stable ordering to prevent duplicates/misses across pages by sorting on `(updated_at, id)` and encoding both into the cursor.\n- Response includes export-ready metadata required for sync (asset identifiers, type, updated timestamps, and any fields needed by clients) and `total_count` when it can be computed without degrading performance.\n\nImplementation details:\n- Query is built to remain index-friendly under filtering/pagination (keyset pagination rather than offset).\n- Adds/updates DB indexes to support the common query shape: `(workspace_id, approval_state, updated_at, id)` plus supporting indexes for filter columns where applicable.\n- Validates request params (limit bounds, cursor decoding, timestamp parsing) and returns consistent error responses.\n\nNotes:\n- Approval-state and versioning rules are intentionally minimal here; deeper validation is handled in GOLD-44.\n- Endpoint behavior is designed for high-priority production use: stable pagination, predictable filtering semantics, and performance under large datasets.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#162"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}