{
  "id": "https://github.com/onyx-dot-app/onyx#100",
  "semantic_identifier": "100: feat: issue_clustering v2: Multilingual language detection + normalized embeddings for cross-language clustering",
  "title": null,
  "source": "github",
  "doc_updated_at": "2026-01-21",
  "metadata": {
    "object_type": "PullRequest",
    "id": "100",
    "merged": "False",
    "state": "open",
    "user": {
      "login": "michael_anderson",
      "name": "michael_anderson",
      "email": "michael_anderson@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "andre_robinson",
        "name": "andre_robinson",
        "email": "andre_robinson@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "2",
    "num_files_changed": "42",
    "labels": [],
    "created_at": "2026-01-21",
    "updated_at": "2026-01-21",
    "closed_at": ""
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\n## Summary\nAdds multilingual support to issue_clustering v2 by detecting the language of each ingested conversation, normalizing text consistently across languages, and generating multilingual embeddings so semantically equivalent issues reported in different languages cluster together.\n\n## Implementation details\n- **Language detection at ingest**\n  - Runs lightweight language detection on each conversation/message (configurable threshold + fallback to `und`).\n  - Persists detected language on the clustering input record.\n\n- **Multilingual normalization/representation pipeline**\n  - Introduces a normalization step that produces a stable `normalized_text` used for embedding and clustering.\n  - Keeps `original_text` unchanged for auditability/search; normalization is deterministic and reversible only in the sense that both fields are stored.\n  - The pipeline is routed by detected language; English continues to follow the existing path.\n\n- **Embeddings**\n  - Adds a multilingual embedding path (shared embedding space across supported languages).\n  - Updates clustering to embed `normalized_text` and cluster on the resulting vectors without changing downstream clustering parameters.\n\n- **Schema / persistence changes**\n  - Extends clustering input storage to persist:\n    - `language` (detected)\n    - `original_text`\n    - `normalized_text` (and `translation_source/metadata` if translation is enabled/used)\n  - Backward-compatible defaults for existing records.\n\n- **Evaluation / regression checks (basic)**\n  - Adds a small cross-language fixture set to verify equivalent issues (e.g., EN/ES/FR) co-cluster.\n  - Adds an English-only regression check to ensure clustering quality does not degrade vs. baseline (sanity metrics / snapshot thresholds).\n\n## Operational notes\n- Feature is gated via config/flag so it can be enabled gradually.\n- No user-facing API changes beyond additional stored fields for audit/search; existing consumers should continue to work unchanged.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#100"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}