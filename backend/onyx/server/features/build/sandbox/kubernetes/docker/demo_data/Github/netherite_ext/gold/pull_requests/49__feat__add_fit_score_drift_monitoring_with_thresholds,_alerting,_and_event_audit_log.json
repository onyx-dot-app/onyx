{
  "id": "https://github.com/onyx-dot-app/onyx#49",
  "semantic_identifier": "49: feat: Add fit score drift monitoring with thresholds, alerting, and event audit log",
  "title": null,
  "source": "github",
  "doc_updated_at": "2025-12-23",
  "metadata": {
    "object_type": "PullRequest",
    "id": "49",
    "merged": "True",
    "state": "closed",
    "user": {
      "login": "kenji_watanabe",
      "name": "kenji_watanabe",
      "email": "kenji_watanabe@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "jiwon_kang",
        "name": "jiwon_kang",
        "email": "jiwon_kang@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "7",
    "num_files_changed": "55",
    "labels": [],
    "created_at": "2025-12-23",
    "updated_at": "2025-12-23",
    "closed_at": "2026-01-21"
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\nThis PR implements automated drift monitoring for fit score model outputs and alerting for high-priority operational visibility.\n\nChanges included:\n- New scheduled drift monitoring job that computes daily (configurable window) metrics per model version and key segments.\n  - Output distribution drift: PSI (primary), KS / quantile deltas, mean/std and percentile shifts.\n  - Score volume / missingness checks to catch pipeline regressions.\n  - When labeled outcomes are available: calibration (ECE + reliability bins) and segment lift/AUC deltas against a rolling baseline.\n- Configurable drift thresholds (per metric + per segment overrides) and baseline definition (rolling N days or fixed reference window).\n- Alerting pipeline:\n  - On threshold breach, emits a single consolidated alert per (model_version, segment, window) with metric details.\n  - Sends notifications to Slack and optionally email, including deep links to the model version, segment filter, and time window dashboard.\n  - Deduping + cooldown to prevent alert storms; escalates on repeated breaches.\n- Persistent drift event storage:\n  - Adds a drift_events table/model capturing model_version, segment, window, computed metrics, threshold(s), alert status, and run metadata for audit and retraining decisions.\n- Observability:\n  - Adds structured logs and a small set of internal metrics (job success/failure, events created, alerts sent).\n\nOperational notes:\n- Requires setting Slack webhook/channel (and optional SMTP/email list) in config/env.\n- Threshold defaults are tuned conservatively; they can be adjusted without code changes via the monitoring config.\n- Backfill is supported via job parameters to generate drift events for historical windows if needed.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#49"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}