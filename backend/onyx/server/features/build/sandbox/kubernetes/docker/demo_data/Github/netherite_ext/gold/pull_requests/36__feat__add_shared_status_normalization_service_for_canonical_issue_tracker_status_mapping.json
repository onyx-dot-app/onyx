{
  "id": "https://github.com/onyx-dot-app/onyx#36",
  "semantic_identifier": "36: feat: Add shared status normalization service for canonical Issue_Tracker status mapping",
  "title": null,
  "source": "github",
  "doc_updated_at": "2026-01-07",
  "metadata": {
    "object_type": "PullRequest",
    "id": "36",
    "merged": "False",
    "state": "open",
    "user": {
      "login": "sofia_ramirez",
      "name": "sofia_ramirez",
      "email": "sofia_ramirez@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "andre_robinson",
        "name": "andre_robinson",
        "email": "andre_robinson@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "3",
    "num_files_changed": "65",
    "labels": [],
    "created_at": "2026-01-07",
    "updated_at": "2026-01-07",
    "closed_at": ""
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\n## Summary\nImplements a shared status-normalization module that maps external system statuses (Zendesk/Intercom, Jira/Linear, CRM) to our canonical `Issue_Tracker.status` using the GOLD-197 mapping table. Updates ingestion/update pipelines to persist only the canonical status while retaining the original external status as metadata. Unknown/deprecated statuses are handled via an explicit fallback canonical status and structured logging for later audit/cleanup.\n\n## Implementation details\n- Added `statusNormalization` module (single entrypoint) that:\n  - Accepts `{ sourceSystem, externalStatus }` (and optional contextual fields when available).\n  - Looks up the canonical status via the GOLD-197 mapping table.\n  - Returns `{ canonicalStatus, externalStatusMetadata }` where metadata includes the raw external status and source.\n  - Falls back to a defined canonical status (e.g., `UNKNOWN/OTHER`) when no mapping exists.\n  - Emits structured logs on fallback with fields like `sourceSystem`, `externalStatus`, and `issueId` (when available).\n- Integrated normalization into:\n  - Ingest paths for new issues.\n  - Update paths for status changes on existing issues.\n- Ensured outbound payload construction uses the canonical status (and includes external status metadata if required by downstream consumers).\n\n## Data/storage behavior changes\n- Stored issue objects now persist:\n  - `status`: canonical `Issue_Tracker` status.\n  - `externalStatus`: preserved as metadata (raw value + source), not used for internal state.\n\n## Notes\n- This is a low-risk, additive refactor; no behavior changes for known statuses.\n- Any unmapped statuses will continue to ingest/update with the fallback canonical status and will be discoverable via logs.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#36"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}