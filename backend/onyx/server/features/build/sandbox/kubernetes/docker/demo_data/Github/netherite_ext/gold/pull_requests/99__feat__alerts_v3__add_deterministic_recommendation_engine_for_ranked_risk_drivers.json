{
  "id": "https://github.com/onyx-dot-app/onyx#99",
  "semantic_identifier": "99: feat: Alerts v3: Add deterministic recommendation engine for ranked risk drivers",
  "title": null,
  "source": "github",
  "doc_updated_at": "2025-12-12",
  "metadata": {
    "object_type": "PullRequest",
    "id": "99",
    "merged": "True",
    "state": "closed",
    "user": {
      "login": "sofia_ramirez",
      "name": "sofia_ramirez",
      "email": "sofia_ramirez@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "jiwon_kang",
        "name": "jiwon_kang",
        "email": "jiwon_kang@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "5",
    "num_files_changed": "67",
    "labels": [],
    "created_at": "2025-12-12",
    "updated_at": "2025-12-12",
    "closed_at": "2026-01-02"
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\nImplements the v1 recommendation layer for Warning Alerts v3. The service now consumes the v3 risk score payload (overall risk + ranked driver list) and returns a deterministic, rule-based set of 3\u20135 suggested interventions for downstream UI rendering.\n\nKey changes:\n- Added a Recommendation Engine module that:\n  - Accepts: account/opportunity identifier, risk score output, ranked risk drivers (with optional evidence fields)\n  - Produces: a stable `recommendations[]` array with `{ id, title, rationale, priority, requiredCrmFields, crmLinks }`\n  - Applies ordered rules to map drivers to interventions (examples implemented):\n    - Missing next-step \u2192 \u201cSchedule next meeting\u201d\n    - Close date slip \u2192 \u201cReconfirm close plan\u201d\n    - Activity decay / low engagement \u2192 \u201cRe-engage champion\u201d\n  - Dedupes overlapping interventions and caps output to 5 while ensuring at least 3 when possible.\n- Implemented fallback behavior when driver evidence is missing (uses driver type + rank; rationale notes missing evidence rather than failing).\n- Introduced explicit schema versioning and field defaults to keep the response shape stable for UI consumers.\n\nTests:\n- Unit tests covering driver\u2192intervention mappings, deterministic ordering, dedupe/capping logic, handling of missing evidence, and schema stability (snapshot-style assertions for the response contract).\n\nNotes for consumers:\n- Response is deterministic for a given input (no randomization/LLM).\n- New schema fields are additive and backward-compatible; UI can render `recommendations[]` without additional lookups beyond provided CRM links/required fields.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#99"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}