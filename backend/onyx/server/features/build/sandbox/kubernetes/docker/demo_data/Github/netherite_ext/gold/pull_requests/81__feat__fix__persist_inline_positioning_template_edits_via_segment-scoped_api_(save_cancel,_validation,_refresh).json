{
  "id": "https://github.com/onyx-dot-app/onyx#81",
  "semantic_identifier": "81: feat: Fix: Persist inline positioning template edits via segment-scoped API (save/cancel, validation, refresh)",
  "title": null,
  "source": "github",
  "doc_updated_at": "2025-05-22",
  "metadata": {
    "object_type": "PullRequest",
    "id": "81",
    "merged": "True",
    "state": "closed",
    "user": {
      "login": "kenji_watanabe",
      "name": "kenji_watanabe",
      "email": "kenji_watanabe@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "andre_robinson",
        "name": "andre_robinson",
        "email": "andre_robinson@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "3",
    "num_files_changed": "78",
    "labels": [],
    "created_at": "2025-05-22",
    "updated_at": "2025-05-22",
    "closed_at": "2025-06-08"
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\n### Summary\nWires the inline positioning template editor to the segment-scoped positioning template CRUD API so edits can be saved/updated per segment, with correct save/cancel behavior, dirty-state handling, validation error rendering, and success/failure feedback.\n\n### Key changes\n- **API integration**\n  - Connects inline editor actions to segment-scoped endpoints (create/update depending on whether a custom template exists for the segment).\n  - Normalizes request/response mapping between UI form state and API payload/shape.\n- **Save workflow**\n  - On save, sends the current form state to the API.\n  - Rehydrates the editor from the **server response** after a successful save (ensures canonical values, server defaults, and any server-side normalization are reflected).\n  - Resets dirty state only after a successful persistence + rehydrate.\n- **Cancel workflow**\n  - Cancel restores the last persisted state (or default template when no segment override exists) and clears dirty state.\n- **Validation + error display**\n  - Surfaces server-side validation errors inline at the field level when provided.\n  - Falls back to a generic error message/toast for unexpected failures.\n- **Defaults / no override behavior**\n  - When a segment has no custom template, the editor initializes from the default template and preserves that baseline until a save creates an override.\n\n### User-visible behavior\n- Save persists edits per segment and refreshes the UI with the saved values.\n- Cancel reverts to the last saved/default state.\n- Validation errors show inline; success/failure is communicated via toast/inline feedback.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#81"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}