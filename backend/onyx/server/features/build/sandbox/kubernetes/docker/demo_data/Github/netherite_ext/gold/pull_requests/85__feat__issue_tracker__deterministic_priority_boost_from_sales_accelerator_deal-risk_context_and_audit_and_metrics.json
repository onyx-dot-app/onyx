{
  "id": "https://github.com/onyx-dot-app/onyx#85",
  "semantic_identifier": "85: feat: Issue_Tracker: Deterministic priority boost from Sales_Accelerator deal-risk context + audit + metrics",
  "title": null,
  "source": "github",
  "doc_updated_at": "2025-12-28",
  "metadata": {
    "object_type": "PullRequest",
    "id": "85",
    "merged": "False",
    "state": "open",
    "user": {
      "login": "michael_anderson",
      "name": "michael_anderson",
      "email": "michael_anderson@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "kevin_sullivan",
        "name": "kevin_sullivan",
        "email": "kevin_sullivan@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "7",
    "num_files_changed": "56",
    "labels": [],
    "created_at": "2025-12-28",
    "updated_at": "2025-12-28",
    "closed_at": ""
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\n## Summary\nImplements v2 priority-boost logic for Issue_Tracker issues using normalized Sales_Accelerator deal-risk fields persisted on the issue context record. The boost is deterministic, explainable (documented thresholds/weights), capped, and will not override critical manual priority settings. Adds an audit trail entry on the issue and metrics/logging for boosts applied vs. skipped.\n\n## What changed\n- **New priority boost evaluator** that reads the issue context\u2019s deal-risk fields:\n  - `risk_score`\n  - `deal_stage`\n  - `arr`\n  - `impacted_deal_count`\n- **Deterministic scoring model** producing a bounded boost amount (e.g., +0..N) applied to the system-calculated priority.\n- **Caps/guards**:\n  - Never increases priority past a configured maximum boost cap.\n  - Skips boosting when a user has set a **manual priority** at/above a protected threshold (e.g., \u201cCritical/Blocker\u201d) so automated boosts don\u2019t override key manual intent.\n- **Explainability**:\n  - Boost result includes a structured reason payload (inputs + computed factors + final boost) used both for debugging and for the audit message.\n- **Audit trail**:\n  - Emits an issue timeline/audit entry like: `Priority boosted due to deal risk` with details (risk_score, stage, ARR band, impacted deals, boost amount).\n- **Observability**:\n  - Adds counters for:\n    - `priority_boost.applied`\n    - `priority_boost.skipped.missing_context`\n    - `priority_boost.skipped.invalid_fields`\n    - `priority_boost.skipped.manual_priority_protected`\n  - Adds structured logs with issue id, context id, computed boost, and skip reason when applicable.\n\n## Implementation notes\n- Boost logic is implemented in a dedicated module/service (e.g., `DealRiskPriorityBooster`) invoked during the issue prioritization pipeline.\n- Validation normalizes/guards inputs (null/NaN/negative ARR, unknown stage) and returns a skip with a reason when inputs are insufficient.\n- Weights/thresholds are centralized in constants/config to keep behavior stable and auditable; includes unit tests covering:\n  - Each factor independently\n  - Caps\n  - Manual priority protection\n  - Missing/invalid context\n\n## User impact\n- Issues with valid deal-risk context may receive a consistent priority boost and an audit entry explaining why.\n- Issues without valid context will not be modified; boosts are skipped with metrics/logging for visibility.\n\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#85"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}