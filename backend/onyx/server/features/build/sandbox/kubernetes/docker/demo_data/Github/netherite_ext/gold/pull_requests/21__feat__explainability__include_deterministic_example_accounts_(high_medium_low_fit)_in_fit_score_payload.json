{
  "id": "https://github.com/onyx-dot-app/onyx#21",
  "semantic_identifier": "21: feat: Explainability: include deterministic example accounts (high/medium/low fit) in Fit Score payload",
  "title": null,
  "source": "github",
  "doc_updated_at": "2025-12-07",
  "metadata": {
    "object_type": "PullRequest",
    "id": "21",
    "merged": "True",
    "state": "closed",
    "user": {
      "login": "michael_anderson",
      "name": "michael_anderson",
      "email": "michael_anderson@netherite-extraction.onyx.app"
    },
    "assignees": [
      {
        "login": "jason_morris",
        "name": "jason_morris",
        "email": "jason_morris@netherite-extraction.onyx.app"
      }
    ],
    "repo": "netherite-ext/gold",
    "num_commits": "8",
    "num_files_changed": "59",
    "labels": [],
    "created_at": "2025-12-07",
    "updated_at": "2025-12-07",
    "closed_at": "2025-12-15"
  },
  "doc_metadata": {
    "repo": "netherite-ext/gold",
    "hierarchy": {
      "source_path": [
        "netherite-ext",
        "gold",
        "pull_requests"
      ],
      "owner": "netherite-ext",
      "repo": "gold",
      "object_type": "pull_request"
    }
  },
  "sections": [
    {
      "text": "## Description\r\n\r\nThis PR extends the Fit Score explainability service to optionally return a small, representative set of \u201cexample accounts\u201d for the evaluated segment.\n\nWhat\u2019s included\n- Adds `exampleAccounts` to the explainability response (backward-compatible; new field is additive and omitted/empty when unavailable).\n- Each example includes: `accountId`, `accountName`, and `fitScore`.\n- Returns up to one example per bucket: `high`, `medium`, `low`.\n\nSelection logic (deterministic)\n- Buckets are derived from the segment\u2019s Fit Score distribution using fixed score thresholds (shared constants) to avoid run-to-run drift.\n- Within each bucket, the selected account is the top-ranked candidate by:\n  1) most recent activity/updated timestamp,\n  2) highest data completeness (required fields present),\n  3) stable tie-breaker on account ID (to guarantee deterministic output).\n- If a bucket has no eligible accounts (empty segment / low-signal / insufficient completeness), that bucket is skipped.\n\nImplementation notes\n- Introduces a small selector module used by the explainability service to compute bucket membership and rank candidates.\n- Updates API/SDK serializers to include the new field without changing existing response shapes.\n\nTests\n- Unit tests cover bucket assignment, deterministic tie-breaking, and behavior for empty segments / segments with no eligible candidates per bucket.\r\n\r\n## How Has This Been Tested?\r\n\r\nstaging\r\n",
      "link": "https://github.com/onyx-dot-app/onyx#21"
    }
  ],
  "primary_owners": [],
  "secondary_owners": []
}